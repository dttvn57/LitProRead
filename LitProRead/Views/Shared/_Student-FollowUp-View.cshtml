@model LitProRead.ViewModels.StudentFormViewModel

<div id="Student-FollowUp">
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#Student-FollowUp').jtable({
            title: '',
            paging: true, //Enable paging
            sorting: true, //Enable sorting
            //defaultSorting: 'FollowUpDate DESC',

            actions: {
                listAction: '@Url.Action("GetStudentFollowUps", "Student")',
                updateAction: '@Url.Action("UpdateStudentFollowUp", "Student")',
                createAction: '@Url.Action("CreateStudentFollowUp", "Student")'
            },
            fields: {
                UniqID: {
                    key: true,      //this is to be used in deletion action
                    visibility: 'hidden'
                },
                ID: {
                    title: 'ID',
                    list: true,
                    input: function (data) {
                        if (data.value) {
                            return '<input type="text" readonly class="jtable-input-readonly" name="ID" value="' + data.value + '"/>';
                        } else {
                            //nothing to worry about here for your situation, data.value is undefined so the else is for the create/add new record user interaction, 
                            //create is false for your usage so this else is not needed but shown just so you know when it would be entered

                            // I don't want create recrod dialog to popup if there's Student selected. I cant find a good way to do this so I use a workaround
                            // by forcing an exception by referncing a non-existing variable
                            var student = $('#CurrentStudent_ID').val();
                            if (student == 0) {
                                var dummy = $("#BAC2").select2.val();
                            }
                            else {
                                return '<input type="text" readonly class="jtable-input-readonly" name="ID" value="' + student + '"/>';
                            }
                        }
                    },
                    width: '5%',
                    visibility: 'hidden'
                },
                FollowUpDate: {
                    title: 'Follow Up Date',
                    //width: '7%',
                    type: 'date',
                    displayFormat: 'yy/mm/dd'
                },
                FollowUpDesc: {
                    title: 'FollowUp',
                    type: 'textarea',
                    sorting: false,
                    list: true,
                },
                DateCreated: {
                    title: 'Date Created',
                    //width: '7%',
                    type: 'date',
                    sorting: false,
                    displayFormat: 'yy/mm/dd'
                },
                DateModified: {
                    title: 'Date Modified',
                    //width: '7%',
                    type: 'date',
                    sorting: false,
                    displayFormat: 'yy/mm/dd'
                }
            },      //fields

            formCreated: function (event, data) {
                if (data.formType == "create") {
                    var v = $('#CurrentStudent_ID').val();
                    data.form.find('input[name="ID"]').val(v);
                }
                //data.form.validationEngine();
                //data.form.find('input[name="Name"]').addClass( 'validate[required]'); data.form.find('input[name="EmailAddress"]').addClass( 'validate[required,custom[email]]'); data.form.find('input[name="Password"]').addClass( 'validate[required]'); data.form.find('input[name="BirthDate"]').addClass( 'validate[required,custom[date]]'); data.form.find('input[name="Education"]').addClass( 'validate[required]'); data.form.validationEngine();             
            },

            formSubmitting: function (event, data) {
                if (data.formType == "create") {
                }
                //return data.form.validationEngine('validate');
            },

            ///formClosed: function (event, data) {
            //data.form.validationEngine('hide');
            //data.form.validationEngine('detach');
            ///}
        });

        //$('#Student-Children').jtable('load', { SID: 18 });

    });
</script>

